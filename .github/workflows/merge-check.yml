name: Merge Check
on:
  merge_group:
    types: [checks_requested]

jobs:
  check_commit_run:
    name: Check commit run
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v6
        with:
          script: |
            const assert = (condition, message) => {
              if (!condition) {
                throw new Error(message)
              }
            }
            const res = await github.rest.checks.listSuitesForRef({
              owner: context.repo.owner,
              repo: context.repo.repo,
              ref: context.payload.merge_group.head_ref,
            })
            console.log(res)
